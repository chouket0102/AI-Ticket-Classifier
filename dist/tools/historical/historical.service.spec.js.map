{"version":3,"sources":["../../../src/tools/historical/historical.service.spec.ts"],"sourcesContent":["import { HistoricalService } from './historical.service';\r\n\r\ndescribe('HistoricalService', () => {\r\n  let service: HistoricalService;\r\n\r\n  beforeEach(() => {\r\n    service = new HistoricalService();\r\n  });\r\n\r\n  it('should be defined', () => {\r\n    expect(service).toBeDefined();\r\n  });\r\n\r\n  it('should return matching tickets for database query', async () => {\r\n    const results = await service.query('database server down');\r\n\r\n    expect(results.length).toBeGreaterThan(0);\r\n    expect(\r\n      results.some((t) =>\r\n        t.description.toLowerCase().includes('database'),\r\n      ),\r\n    ).toBe(true);\r\n  });\r\n\r\n  it('should return matching tickets for security query', async () => {\r\n    const results = await service.query('unauthorized access security breach');\r\n\r\n    expect(results.length).toBeGreaterThan(0);\r\n    expect(\r\n      results.some((t) => t.category === 'Security'),\r\n    ).toBe(true);\r\n  });\r\n\r\n  it('should return matching tickets for VPN query', async () => {\r\n    const results = await service.query('VPN connectivity issues');\r\n\r\n    expect(results.length).toBeGreaterThan(0);\r\n    expect(\r\n      results.some((t) =>\r\n        t.description.toLowerCase().includes('vpn'),\r\n      ),\r\n    ).toBe(true);\r\n  });\r\n\r\n  it('should return empty for unrelated query', async () => {\r\n    const results = await service.query('xyzabc123nonexistent');\r\n\r\n    expect(results).toEqual([]);\r\n  });\r\n\r\n  it('should return at most 5 results', async () => {\r\n    const results = await service.query('the a is and or');\r\n\r\n    expect(results.length).toBeLessThanOrEqual(5);\r\n  });\r\n\r\n  it('should allow adding new tickets', async () => {\r\n    service.addTicket({\r\n      ticketId: 'HIST-CUSTOM',\r\n      category: 'Custom',\r\n      priority: 'P4-Low',\r\n      description: 'Custom test xyzfoobar ticket',\r\n      resolution: 'Custom resolution',\r\n      resolvedAt: '2026-01-01T00:00:00Z',\r\n      resolutionTimeHours: 1,\r\n    });\r\n\r\n    const results = await service.query('xyzfoobar');\r\n    expect(results.length).toBe(1);\r\n    expect(results[0].ticketId).toBe('HIST-CUSTOM');\r\n  });\r\n});\r\n"],"names":["describe","service","beforeEach","HistoricalService","it","expect","toBeDefined","results","query","length","toBeGreaterThan","some","t","description","toLowerCase","includes","toBe","category","toEqual","toBeLessThanOrEqual","addTicket","ticketId","priority","resolution","resolvedAt","resolutionTimeHours"],"mappings":";;;;mCAAkC;AAElCA,SAAS,qBAAqB;IAC5B,IAAIC;IAEJC,WAAW;QACTD,UAAU,IAAIE,oCAAiB;IACjC;IAEAC,GAAG,qBAAqB;QACtBC,OAAOJ,SAASK,WAAW;IAC7B;IAEAF,GAAG,qDAAqD;QACtD,MAAMG,UAAU,MAAMN,QAAQO,KAAK,CAAC;QAEpCH,OAAOE,QAAQE,MAAM,EAAEC,eAAe,CAAC;QACvCL,OACEE,QAAQI,IAAI,CAAC,CAACC,IACZA,EAAEC,WAAW,CAACC,WAAW,GAAGC,QAAQ,CAAC,cAEvCC,IAAI,CAAC;IACT;IAEAZ,GAAG,qDAAqD;QACtD,MAAMG,UAAU,MAAMN,QAAQO,KAAK,CAAC;QAEpCH,OAAOE,QAAQE,MAAM,EAAEC,eAAe,CAAC;QACvCL,OACEE,QAAQI,IAAI,CAAC,CAACC,IAAMA,EAAEK,QAAQ,KAAK,aACnCD,IAAI,CAAC;IACT;IAEAZ,GAAG,gDAAgD;QACjD,MAAMG,UAAU,MAAMN,QAAQO,KAAK,CAAC;QAEpCH,OAAOE,QAAQE,MAAM,EAAEC,eAAe,CAAC;QACvCL,OACEE,QAAQI,IAAI,CAAC,CAACC,IACZA,EAAEC,WAAW,CAACC,WAAW,GAAGC,QAAQ,CAAC,SAEvCC,IAAI,CAAC;IACT;IAEAZ,GAAG,2CAA2C;QAC5C,MAAMG,UAAU,MAAMN,QAAQO,KAAK,CAAC;QAEpCH,OAAOE,SAASW,OAAO,CAAC,EAAE;IAC5B;IAEAd,GAAG,mCAAmC;QACpC,MAAMG,UAAU,MAAMN,QAAQO,KAAK,CAAC;QAEpCH,OAAOE,QAAQE,MAAM,EAAEU,mBAAmB,CAAC;IAC7C;IAEAf,GAAG,mCAAmC;QACpCH,QAAQmB,SAAS,CAAC;YAChBC,UAAU;YACVJ,UAAU;YACVK,UAAU;YACVT,aAAa;YACbU,YAAY;YACZC,YAAY;YACZC,qBAAqB;QACvB;QAEA,MAAMlB,UAAU,MAAMN,QAAQO,KAAK,CAAC;QACpCH,OAAOE,QAAQE,MAAM,EAAEO,IAAI,CAAC;QAC5BX,OAAOE,OAAO,CAAC,EAAE,CAACc,QAAQ,EAAEL,IAAI,CAAC;IACnC;AACF"}