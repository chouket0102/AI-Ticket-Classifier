{"version":3,"sources":["../../../src/tools/historical/historical.tool.ts"],"sourcesContent":["import { DynamicStructuredTool } from '@langchain/core/tools';\r\nimport { z } from 'zod';\r\nimport { HistoricalService } from './historical.service';\r\n\r\nexport function createHistoricalTool(\r\n  historicalService: HistoricalService,\r\n): DynamicStructuredTool {\r\n  return new DynamicStructuredTool({\r\n    name: 'query_historical',\r\n    description:\r\n      'Queries historical resolved tickets using natural language to find similar past cases and their resolutions. Use this for complex P1/P2 issues or when additional context from past incidents would help.',\r\n    schema: z.object({\r\n      question: z\r\n        .string()\r\n        .describe(\r\n          'Natural language question about historical tickets, e.g. \"database outage\" or \"VPN connectivity issues\"',\r\n        ),\r\n    }),\r\n    func: async ({ question }) => {\r\n      const results = await historicalService.query(question);\r\n      return JSON.stringify(results, null, 2);\r\n    },\r\n  });\r\n}\r\n"],"names":["createHistoricalTool","historicalService","DynamicStructuredTool","name","description","schema","z","object","question","string","describe","func","results","query","JSON","stringify"],"mappings":";;;;+BAIgBA;;;eAAAA;;;uBAJsB;qBACpB;AAGX,SAASA,qBACdC,iBAAoC;IAEpC,OAAO,IAAIC,4BAAqB,CAAC;QAC/BC,MAAM;QACNC,aACE;QACFC,QAAQC,MAAC,CAACC,MAAM,CAAC;YACfC,UAAUF,MAAC,CACRG,MAAM,GACNC,QAAQ,CACP;QAEN;QACAC,MAAM,OAAO,EAAEH,QAAQ,EAAE;YACvB,MAAMI,UAAU,MAAMX,kBAAkBY,KAAK,CAACL;YAC9C,OAAOM,KAAKC,SAAS,CAACH,SAAS,MAAM;QACvC;IACF;AACF"}